<!-- Config -->
<div class="wrapper" id="config">
    <h1 class="title">Ghost Updater for Microsoft Azure Websites</h1>
    <p>This tool automatically updates Ghost on a Microsoft Azure Website. It's especially useful if you installed Ghost using the Gallery and just selected 'Ghost' in the Azure Management Portal while creating the website.</p>
    <div id="websiteDetails">
        <div class="row">
            <label for="blog-url">Blog URL</label>
            <input id="blog-url" type="text" placeholder="yoursite.azurewebsites.net" required> 
            <p>Please enter your azurewebsites.net address, which has the format <em>yoursite.azurewebsites.net</em>.</p>
        </div>
        <div class="row">
            <label for="blog-username">Deployment Username</label>
            <input id="blog-username" type="text" placeholder="$yoursite" required>
        </div>
        <div class="row">
            <label for="blog-password">Deployment Password</label>
            <input id="blog-password" type="password" required>
            <p><strong>Do not</strong> use the username/password you use to log into Azure. <a data-action="UpdaterClient.utils.switchPanel" data-target="#help" href="#">Where do I find my deployment credentials?</a></p>
        </div>
        <div class="row" id="ghost-zip-container">
            <label for="ghost-zip">Ghost Package</label>
            <input id="ghost-zip" accept=".zip" type="file" required>
        </div>
    </div>
    <div id="confirmArea">
        <button data-action="UpdaterClient.config.setConfig">Continue</button>
    </div>
</div>

<!-- Backup Disclaimer -->
<div class="wrapper" id="backupdisclaimer">
    <h1 class="title">Save your stuff</h1>
    <p>It's unlikely that things go wrong, but it's better to be safe than sorry. We can create a full backup (including all files). Once the update is done, you can either restore or delete it. This is heavily recommended.</p>
    <p><strong>In either case, please stop changing your blog's content now.</strong></p>
    <div id="confirmArea">
        <button data-action="UpdaterClient.utils.switchPanel" data-target="#config" id="btn-back-s2">Back</button>
        <button data-action="UpdaterClient.updater.startInstallation" class="warning">Update without Backup</button>
        <button data-action="UpdaterClient.backup.startBackup">Update with Backup</button>
    </div>
</div>


<!-- Help -->
<div class="wrapper" id="help">
    <h1 class="title">Finding your deployment credentials</h1>
    <p>The username and password required for this tool are the so called deployment credentials - the same you use to upload files via FTP or Git. <strong>They are not the credentials you use to log into the Azure Management Portal!</strong></p>
    <p>In your web browser, visit the Azure Management Portal and open up your website's dashboard. There, click on 'Reset Your Deployment Credentials' to enter a username and password.</p>
    <img src="/images/password-screen.png" />
    <div id="confirmArea">
        <button data-action="UpdaterClient.utils.switchPanel" data-target="#config" id="helpback">Go Back</button>
    </div>
</div>

<!-- Backup -->
<div class="wrapper" id="backup">
    <h1 class="title">Backing up your ghost blog</h1>
    <div id="backupOutputArea" class="outputArea"></div>
    <h4 class="scriptLogTitle">Live Script Output</h4>
    <div id="backupScriptLogArea" class="scriptLogArea">
        <p id="backupScriptLog"></p>
    </div>
</div>

<!-- Update -->
<div class="wrapper" id="update">
    <h1 class="title">Updating your ghost blog</h1>
    <div id="updateOutputArea"></div>
    <h4 class="scriptLogTitle">Live Script Output</h4>
    <div id="updateScriptLogArea" class="outputArea">
        <p id="updateScriptLog" class="scriptLogArea"></p>
    </div>
</div>

<!-- Backup Restore/Delete -->
<div class="wrapper" id="updatefinished">
    <h1 class="title">All done!</h1>
    <p>We're all done. Please visit your blog and ensure that everything is working well (if the blog loads, you're good). If the blog doesn't load after a few tries or displays an error, you can go back to your backup.</p>
    <div id="confirmArea">
        <button data-action="UpdaterClient.backup.deleteBackup">Delete Backup</button>
        <button data-action="UpdaterClient.backup.restoreBackup">Restore Backup</button>
    </div>
</div>

<script src="/scripts/built.js" type="text/javascript"></script>
<script type="text/javascript">
    UpdaterClient.init();
</script>